<html>
<body>

<form action="@@search" role="search" class="pat-livesearch"
      i18n:domain="plone"
      tal:define="portal_state context/@@plone_portal_state;
                  context_state context/@@plone_context_state;
                  navigation_root_url portal_state/navigation_root_url;
                  folder_path python:'/'.join(context_state.folder().getPhysicalPath())"
      tal:attributes="action string:${navigation_root_url}/@@search;
                      data-pat-livesearch string:ajaxUrl:${navigation_root_url}/@@ajax-search;;minimumInputLength:3">

  <div class="LSBox">
    <label class="hiddenStructure invisible"
           for="searchGadget"
           i18n:translate="text_search">Search Site</label>

    <input name="SearchableText"
           type="text"
           size="18"
           value=""
           id="searchGadget"
           title="Search Site"
           placeholder="Search Site"
           i18n:attributes="title title_search_site;
                            placeholder title_search_site"
           tal:attributes="value request/form/SearchableText|nothing"
                           class="searchField"
           tal:condition="not:view/data/placeholder|nothing" />
    <input name="SearchableText"
           type="text"
           size="18"
           value=""
           id="searchGadget"
           title="Search Site"
           placeholder="Search Site"
           i18n:attributes="title title_search_site"
           tal:attributes="value request/form/SearchableText|nothing;
                           placeholder view/data/placeholder"
           class="searchField"
           tal:condition="view/data/placeholder|nothing" />

    <input class="searchButton invisible"
           type="submit"
           value="Search"
           i18n:attributes="value label_search" />

    <tal:paths tal:define="paths view/data/paths|python:[]">
      <input type="hidden"
             name="path"
             tal:condition="not:paths"
             tal:attributes="value folder_path" />
      <input type="hidden"
             name="path:list"
             tal:define="pc nocall:context/portal_catalog;
                             brains python:pc(UID=paths)"
             tal:repeat="brain brains"
             tal:condition="brains"
             tal:attributes="value brain/getPath" />
    </tal:paths>

    <input type="hidden"
           name="portal_type:list"
           tal:repeat="type_ view/data/portal_types|python:[]"
           tal:attributes="value type_" />

  </div>
</form>

</body>
</html>
