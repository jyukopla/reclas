<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    if-content="/html/body[@id='visual-portal-wrapper']">

  <!-- Drop default stylesheets and scripts -->
  <drop content="//link[@rel='stylesheet']" />
  <drop content="//script" />

  <!-- Move scripts within body after bundle -->
  <after theme-children="/html/body" method="raw"
         content="/html/head/script[not(@src)]" />
  <after theme-children="/html/body" method="raw"
         content="/html/body//script" />

  <!-- Drop logged-in bundles for anonymous users -->
  <drop css:if-content="body.userrole-anonymous"
        theme="//*[@data-name='bundle-logged-in']" />

  <!-- Import TTW customizations -->
  <xi:include href="++theme++reclastheme-custom/custom.xml">
    <xi:fallback/>
  </xi:include>

</rules>
